# OnlineRealtimePoker

5枚のカードを示す文字列を入力とし、ポーカーの役を出力せよ。
ただし:

* 一枚のカードは、スートを表す文字＋ランクを表す文字列 で構成される。
* スートを表す文字は、S, H, D, C のいずれか
* ランクを表す文字列は、2, 3, ..., 9, 10, J, Q, K, A のいずれか
* 下表の役に対応すること。下表の役に該当しない場合は '--' を出力すること。
* カードはジョーカーを含まない52枚から5枚が選ばれる。
* 不正な入力への対応は不要。

対応すべき役と、その役だった場合に出力する文字列は以下のとおり：

* フォーカード : 4K
* フルハウス : FH
* スリーカード : 3K
* ツーペア : 2P
* ワンペア : 1P
* 上記のいずれにも該当しない : --

例えば、入力が「D3C3C10D10S3」ならフルハウスなので「FH」と出力する。
入力が「S8D10HJS10CJ」ならツーペアなので「2P」と出力する。

-- [第一回 オフラインリアルタイムどう書くの参考問題 - Qiita](https://qiita.com/Nabetani/items/cbc3af152ee3f50a822f)

[List of poker hands - Wikipedia](https://en.wikipedia.org/wiki/List_of_poker_hands)

## 問題空間

* 5枚のカードからポーカーの役のうち5つを判別する。
    * フォーカード
    * フルハウス
    * スリーカード
    * ツーペア
    * ワンペア
* この問題空間においては、スートは重要ではない。
* この問題空間においては、役の判定以外のポーカールールは重要ではない。

## 理想形

* 5枚のカードの情報を与えると、何らかの役を満たす場合、その役が何であるか知ることができる。

## 解決策

* ユーザはポーカー役評価器(poker hand evaluator)に対して、5枚のカード情報を与える代わりに、役を得ることができる。
* ポーカー役評価器は、符号器と役分類器の2つの相互作用によって成り立つ。
* 符号器(coder)は5枚のカード情報を表現したドメイン固有言語(例えばD3C3C10D10S3)をデコードする。
* 役分類器(classifier)はカード情報をポーカールールに基づき評価し、適切な役に分類する。
* 符号器は分類された役を役を表現するドメイン固有言語(例えばFH)にエンコードする。

## 設計上の狙い

* ポーカーの役分類は、コンピュータ的に好まれるモデルよりも認知モデル(cognitive model)を直接的に表現することを重視する。
* 役が増えた場合に変更の影響を最小限にする。
* DSLの扱いと役の分類を分離する。ドメイン固有言語とポーカールールは異なるライフサイクルがあるものと想定する。
* モデルは問題空間を解決できる必要十分な規模にする。問題解決に不必要なスートなどの概念は割愛される。

## ポーカー役評価器の使い方

```php
<?php

use Suin\Playground\OnlineRealtimePoker\PokerHandEvaluator;

$hand = (new PokerHandEvaluator())->evaluateHand('D3C3C10D10S3');
var_dump($hand); //=> string(2) "FH"
```
